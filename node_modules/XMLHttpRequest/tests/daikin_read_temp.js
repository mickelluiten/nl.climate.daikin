const XMLHttpRequest = require("XMLHttpRequest").XMLHttpRequest;

console.log('here we go.... get airco\'s sensor_info');

var target="http://192.168.0.63";
var request="GET";
var parameters="/aircon/get_sensor_info";

var xmlhttp=new XMLHttpRequest();
xmlhttp.open(request,target + parameters, true);
xmlhttp.onreadystatechange  = function () {
	if ( xmlhttp.readyState == 4 ){
		if( xmlhttp.status==200 ){
			var json = '{"' + xmlhttp.responseText.replace(/=/g, '": "').replace(/,/g, '", "') + '"}';
			var response = JSON.parse(json);
            var sensor_info = [];
            for (var setting in response){
                sensor_info.push(response[setting]);
            };
            console.log(sensor_info);
		}else{
			console.log("Error: sensor request failed");
		}
	}else{
		
		//alert(xmlhttp.readyState);
	}
}

xmlhttp.send();
